<!doctype html>
<meta charset="utf-8">
<script src="../js/d3.js"></script>
<script src="../build/vistk.js"></script>
<link href="../css/vistk.css" rel="stylesheet">
<body>
<div id="viz"></div>

<script>

  // TODO
  // [X] Load Anscombe dataset
  // [ ] Derive descriptive statistics
  // [X] Init 4 tables
  // [X] Init 4 scatterplots
  // [ ] Customize tables (zebra, headers, ..)
  // [ ] Connect the charts

d3.csv("../data/anscombe.csv", function(graph) {

  data = [];

  graph.forEach(function(d) {
    
    d["x"] = +d["x"];
    d["y"] = +d["y"];

    data.push(d)
  })

  descriptive = []

  // Find unique categories
  var groups = d3.set(data.map(function(d) { return d["Group"]; })).values();

  groups.forEach(function(d) {

    // Create a table
    var t = vistk.viz()
      .type("table")
      .width(800)
      .height(300)
      .container("#viz")
      .data(data.filter(function(e) { return e["Group"] == d; }))
      .columns(['Group', 'x', 'y'])
      .group('Group')
      .title("Raw Data")
      .ui(false)

    d3.select("#viz").call(t)

    // Create a scatterplot
    var v = vistk.viz()
      .type("scatterplot")
      .container("#viz")
      .width(200)
      .height(150)
      .data(data.filter(function(e) { return e["Group"] == d; }))
      .x_var("x")
      .y_var("y")
      .id(["continent", "country"])
      .group("continent")
      .color("continent")
      .ui(false)

    d3.select("#viz").call(v)

  })

})

</script>