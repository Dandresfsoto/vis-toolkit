<!doctype html>
<meta charset="utf-8">
<script src="../js/d3.js"></script>
<script src="../js/vistk.js"></script>
<link href="../css/vistk.css" rel="stylesheet">
<body>

<div id="viz"></div>

<script>

//d3.json("../data/product_space_hs4.json", function(error, products) {

  d3.json("../data/network_hs.json", function(graph) {

    // Data cleaning
    graph.nodes.forEach(function(node){
      node.id = node._id.slice(2, 6);
      node.category = node._id.slice(0, 2);      
    });

    visualization = vistk.viz()
      .data(graph.nodes)
      .links(graph.links)      
 //     .join(products.data, "id")
      .type("nodelink")
      .container("#viz")
      .x_var("nb_products")
      .y_var("avg_products")
      .id(["category", "id"])
      .group("category")
      .size("value")
      .time(2012)
      .color("category")
      .title("Product space")

    d3.select("#viz")
      .call(visualization)

  });

//});

</script>
