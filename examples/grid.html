<!doctype html>
<meta charset="utf-8">
<script src="../js/d3.js"></script>
<script src="../build/vistk.js"></script>
<link href="../css/vistk.css" rel="stylesheet">
<body>
<div id="viz"></div>
<script>

// TODO
// [X] Create fake data for the table to be screen filling
// [ ] Customize enter exit behaviors using colors (e.g. red before exit)
// [ ] Option for using a consistant grid (e.g. 100 items)
//     which implies to use a color cutoff rather than enter/exit elements
// [ ] See http://bl.ocks.org/mbostock/1009139

var visualization = vistk.viz().params({
  type: "grid",
  width: 800,
  height: 600,
  container: "#viz",
  data: [],
  var_text: "index",
  var_color: "index",
  var_id: "index",
  var_sort: "index",
  var_sort_asc: false,
	items: [{
    attr: "name",
    marks: [{
      type: "circle",
      rotate: "0",
//      fill: function(d) { return vars.color(vars.accessor_values(d)[vars.var_color]); }
    },{
      type: "text",
      rotate: "-30"
    }]
  }],
  ui: {
    default: true,
    sort: ["index"]
  }
});

d3.select("#viz").call(visualization);

setInterval(function(d) {

  var data = d3.range(100*Math.random()).map(function(d) {
  	return {id: d};
  });

  visualization.params({data: data, var_id: "id", refresh: true});
  d3.select("#viz").call(visualization);

}, 3000)

</script>
</body>
