<!doctype html>
<meta charset="utf-8">
<script src="../js/d3.js" charset="utf-8"></script>
<script src="../js/vistk.js"></script>
<link href="../css/vistk.css" rel="stylesheet">
<body>
<div id="viz"></div>

<table width="100%">

<tr><td>                  </td><td>All departments (2013)</td><td>Value</td><td>Growth, Annual</td></tr>
<td>GDP                   </td><td><div id="js-dotplot-gdp"></div></td><td>Value</td><td><div id="js-sparkline-gdp"></div></td></tr>
<tr><td>Income per Capita </td><td><div id="js-dotplot-income-capita"></div></td><td>Value</td><td><div id="js-sparkline-income-capita"></div></td></tr>
<tr><td>Population        </td><td><div id="js-dotplot-population"></div></td><td>Value</td><td><div id="js-sparkline-growth"></div></td></tr>

</table>

<script>

d3.tsv("../data/COL_pop_realgdp_dept_2000-2013.txt", function(error, departments) {

  departments.forEach(function(d, i) {

    d.dept_pop = +d.dept_pop;
    d.year = +d.year;    
    d.realgdp = +d.realgdp;
    d.realgdp_percap = +d.realgdp_percap;    
    d["sum(export_value)"] = +d["sum(export_value)"];
    d["value_added"] = +d["value_added"];

  })

  dep = departments;

  dot_plot_gdp = vistk.viz()
    .type("dotplot")
    .container("#js-dotplot-gdp")
    .data(departments)
    .height(100)
    .width(400)    
    .x_var("dept_pop")
    .x_scale("linear")
    .y_var(["dept_pop", "realgdp"]) //TODO: make it categorical
    .id("name")
    .group("dept_name")
    .text("dept_name")
    .connect("name")
    .focus(0)
    .time({var_time: "year", current_time: 2013})
    .ui(false)

  d3.select("#js-dotplot-gdp").call(dot_plot_gdp)

  dotplot_income_capita = vistk.viz()
    .type("dotplot")
    .container("#js-dotplot-income-capita")
    .data(departments)
    .height(100)
    .width(400)    
    .x_var("dept_pop")
    .x_scale("linear")
    .y_var(["dept_pop", "realgdp"]) //TODO: make it categorical
    .id("name")
    .group("dept_name")
    .text("dept_name")
    .connect("name")
    .focus(0)
    .time({var_time: "year", current_time: 2013})
    .ui(false)

  d3.select("#js-dotplot-income-capita").call(dotplot_income_capita)

  dotplot_population = vistk.viz()
    .type("dotplot")
    .container("#js-dotplot-population")
    .data(departments)
    .height(100)
    .width(400)    
    .x_var("dept_pop")
    .x_scale("linear")
    .y_var(["dept_pop", "realgdp"]) //TODO: make it categorical
    .id("name")
    .group("dept_name")
    .text("dept_name")
    .connect("name")
    .focus(0)
    .time({var_time: "year", current_time: 2013})
    .ui(false)

  d3.select("#js-dotplot-population").call(dotplot_population)

  sparkline_gdp = vistk.viz()
    .type("sparkline")
    .container("#js-sparkline-gdp")
    .height(100)
    .width(300)
   // .data(res)
    .id("id")
    .group("category")
    .color("name")
    .title("Products")
    .group("category")
    .ui(false)
    .text("name");

  d3.select("#js-sparkline-gdp").call(sparkline_gdp)

  sparkline_income_capita = vistk.viz()
    .type("sparkline")
    .container("#js-sparkline-income-capita")
    .height(100)
    .width(300)
   // .data(res)
    .id("id")
    .group("category")
    .color("name")
    .title("Products")
    .group("category")
    .ui(false)
    .text("name");

  d3.select("#js-sparkline-income-capita").call(sparkline_income_capita)

  sparkline_growth = vistk.viz()
    .type("sparkline")
    .container("#js-sparkline-growth")
    .height(100)
    .width(300)
   // .data(res)
    .id("id")
    .group("category")
    .color("name")
    .title("Products")
    .group("category")
    .ui(false)
    .text("name");

  d3.select("#js-sparkline-growth").call(sparkline_growth)
})

</script>
