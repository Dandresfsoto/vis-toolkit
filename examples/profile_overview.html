<!doctype html>
<meta charset="utf-8">
<script src="../js/d3.js" charset="utf-8"></script>
<script src="../js/vistk.js"></script>
<link href="../css/vistk.css" rel="stylesheet">
<body>
<div id="viz"></div>

<table width="100%">

<tr><td>                  </td><td>All departments (2013)</td><td>Value</td><td>Growth, Annual</td></tr>
<td>GDP                   </td><td><div id="js-dotplot-gdp">Dotplot</div></td><td>Value</td><td>Growth</td></tr>
<tr><td>Income per Capita </td><td><div id="js-dotplot-income-capita">Dotplot</div></td><td>Value</td><td>Growth</td></tr>
<tr><td>Population        </td><td><div id="js-dotplot-population">Dotplot</div></td><td>Value</td><td>Growth</td></tr>

</table>

<script>
/*

TODO
-Create instances of dotplots
-Create instances of sparklines
-Connect dot plots
-

d3.tsv("../data/COL_pop_realgdp_dept_2000-2013.txt", function(error, departments) {

  departments.forEach(function(d, i) {

    d.dept_pop = +d.dept_pop;
    d.year = +d.year;    
    d.realgdp = +d.realgdp;
    d.realgdp_percap = +d.realgdp_percap;    
    d["sum(export_value)"] = +d["sum(export_value)"];
    d["value_added"] = +d["value_added"];

  })

  dep = departments;

  visualization = vistk.viz()
    .type("dotplot")
    .container("#viz")
    .data(departments)
    .x_var("dept_pop")
    .x_scale("linear")
    .y_var(["dept_pop", "realgdp"]) //TODO: make it categorical
    .id("name")
    .group("dept_name")
    .text("dept_name")
    .connect("name")
    .focus(0)
    .time({var_time: "year", current_time: 2013})

  d3.select("#viz").call(visualization)

  d3.select("#viz").append("select")
    .attr("id", "select_x_var")
    .on("change", function(d) {
      vars.x_var = this.value;
      d3.select("#viz").call(visualization)
    })
    .selectAll("option")
    .data(d3.keys(dep[0]))
  .enter()
    .append("option")
    .attr("value", function(d) { return d; })
    .html(function(d) { return d; })

    var label_radios = d3.select("#viz").selectAll(".aggregations").data(["index", "linear"])
      .enter()
        .append("label")
        .attr("class", "aggregations")

    // TODO: find levels of aggregation
    label_radios.append("input")
               .attr("type", "radio")
               .attr("id", "id")  
               .attr("value", function(d) { return d; })
               .attr("name", "radio-nest")
               .property("checked", true)
               .on("change", function(d) { 

                  vars.x_scale = d;
                  d3.select("#viz").call(visualization)

               });

    label_radios.append("span")
        .html(function(d) { 

          return d ;
        });

});
*/



</script>
