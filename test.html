<!doctype html>
<meta charset="utf-8">
<script src="js/d3.js"></script>
<script src="js/vistk.js"></script>
<body>
<div id="viz"></div>
<script>

  var test_data = [
    {"group": "transportation", "usd": 12897429187, "product": "cars", "image": "trans.png"},
    {"group": "transportation", "usd": 8974520985, "product": "airplanes", "image": "trans.png"},
    {"group": "foodstuffs", "usd": 98723420, "product": "apples", "image": "food.png"},
    {"group": "foodstuffs", "usd": 6897234098, "product": "bananas", "image": "food.png"},
    {"group": "foodstuffs", "usd": 590834587, "product": "oranges", "image": "food.png"}
  ];

  var visualization = vistk.viz()
    .container("body")
    .data(test_data)
    .id("product")
    .group("group")
	  .columns(["id", "year", "name", "continent"])

  d3.select("#viz").call(visualization)

  // Identify the unique categories that can be used to filter

  var unique_categories = d3.set(test_data.map(function(d) { return d[vars.group_var]; })).values();

  var label_checkboxes = d3.select("body").selectAll("input").data(unique_categories)
    .enter()
      .append("label");

  label_checkboxes.append("input")
      .attr("type", "checkbox")
      .property("checked", false)
      .on("change", function(d) { 
        // TODO: filter by d
      })

  label_checkboxes.append("span")
      .html(function(d) { return d})

  // TODO: find levels of aggregation
  d3.select("body").append("input")
             .attr("type", "radio")
             .attr("id", "id")  
             .attr("name", "radio-nest")
             .property("checked", true)
             .on("change", function() { vars.show_color = !vars.show_color; })


</script>

<br>
</body>